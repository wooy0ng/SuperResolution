{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/home/ec2-user/super-resolution/node_modules/@babel/runtime/regenerator/index.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createImageDomFromUrl = createImageDomFromUrl;\nexports.limitImageSize = limitImageSize;\nexports.getCroppedFile = getCroppedFile;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n} // 以下工具部分复制自 https://codesandbox.io/s/q8q1mnr01w\n// 略有修改\n\n\nfunction createImageDomFromUrl(_x) {\n  return _createImageDomFromUrl.apply(this, arguments);\n}\n\nfunction _createImageDomFromUrl() {\n  _createImageDomFromUrl = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              var image = new Image();\n              image.addEventListener(\"load\", function () {\n                return resolve(image);\n              });\n              image.addEventListener(\"error\", function (error) {\n                return reject(error);\n              });\n              image.src = url;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _createImageDomFromUrl.apply(this, arguments);\n}\n\nfunction limitImageSize(_x2) {\n  return _limitImageSize.apply(this, arguments);\n}\n/**\r\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\r\n * @param {string} imageUrl - Image File url\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\r\n * @param {number} maxWidth\r\n * @param {number} maxHeight\r\n * @param {string} mimeType\r\n * @param {number} quality\r\n */\n\n\nfunction _limitImageSize() {\n  _limitImageSize = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref) {\n    var imageUrl, maxWidth, maxHeight, mimeType, quality, image, _limitSize, width, height, canvas, ctx;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            imageUrl = _ref.imageUrl, maxWidth = _ref.maxWidth, maxHeight = _ref.maxHeight, mimeType = _ref.mimeType, quality = _ref.quality;\n            _context2.next = 3;\n            return createImageDomFromUrl(imageUrl);\n\n          case 3:\n            image = _context2.sent;\n\n            if (!(image.width <= maxWidth && image.height <= maxHeight)) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", imageUrl);\n\n          case 6:\n            _limitSize = limitSize(image.width, image.height, maxWidth, maxHeight), width = _limitSize.width, height = _limitSize.height;\n            canvas = document.createElement(\"canvas\");\n            canvas.width = width;\n            canvas.height = height;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(image, 0, 0, width, height);\n            return _context2.abrupt(\"return\", canvas.toDataURL(mimeType, quality));\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _limitImageSize.apply(this, arguments);\n}\n\nfunction getCroppedFile(_x3, _x4, _x5, _x6, _x7, _x8) {\n  return _getCroppedFile.apply(this, arguments);\n}\n\nfunction _getCroppedFile() {\n  _getCroppedFile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(imageUrl, pixelCrop, maxWidth, maxHeight, mimeType, quality) {\n    var _limitSize2, width, height, image, canvas, ctx;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _limitSize2 = limitSize(pixelCrop.width, pixelCrop.height, maxWidth, maxHeight), width = _limitSize2.width, height = _limitSize2.height;\n            _context3.next = 3;\n            return createImageDomFromUrl(imageUrl);\n\n          case 3:\n            image = _context3.sent;\n            canvas = document.createElement(\"canvas\");\n            canvas.width = width;\n            canvas.height = height;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(image, pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height, 0, 0, width, height);\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              canvas.toBlob(resolve, mimeType, quality);\n            }));\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getCroppedFile.apply(this, arguments);\n}\n\nfunction limitSize(width, height, maxWidth, maxHeight) {\n  var widthRatio = width / maxWidth;\n  var heightRation = height / maxHeight;\n  var maxRation = Math.max(widthRatio, heightRation);\n\n  if (maxRation > 1) {\n    return {\n      width: width / maxRation,\n      height: height / maxRation\n    };\n  } else {\n    return {\n      width: width,\n      height: height\n    };\n  }\n}","map":{"version":3,"sources":["/home/ec2-user/super-resolution/node_modules/react-bootstrap-image-cropper/dist/utils.js"],"names":["Object","defineProperty","exports","value","createImageDomFromUrl","limitImageSize","getCroppedFile","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","_x","_createImageDomFromUrl","mark","_callee","url","wrap","_callee$","_context","prev","next","abrupt","image","Image","addEventListener","src","stop","_x2","_limitImageSize","_callee2","_ref","imageUrl","maxWidth","maxHeight","mimeType","quality","_limitSize","width","height","canvas","ctx","_callee2$","_context2","sent","limitSize","document","createElement","getContext","drawImage","toDataURL","_x3","_x4","_x5","_x6","_x7","_x8","_getCroppedFile","_callee3","pixelCrop","_limitSize2","_callee3$","_context3","x","y","toBlob","widthRatio","heightRation","maxRation","Math","max"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createImageDomFromUrl = createImageDomFromUrl;\nexports.limitImageSize = limitImageSize;\nexports.getCroppedFile = getCroppedFile;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n// 以下工具部分复制自 https://codesandbox.io/s/q8q1mnr01w\n// 略有修改\nfunction createImageDomFromUrl(_x) {\n  return _createImageDomFromUrl.apply(this, arguments);\n}\n\nfunction _createImageDomFromUrl() {\n  _createImageDomFromUrl = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee(url) {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              var image = new Image();\n              image.addEventListener(\"load\", function () {\n                return resolve(image);\n              });\n              image.addEventListener(\"error\", function (error) {\n                return reject(error);\n              });\n              image.src = url;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _createImageDomFromUrl.apply(this, arguments);\n}\n\nfunction limitImageSize(_x2) {\n  return _limitImageSize.apply(this, arguments);\n}\n/**\r\n * This function was adapted from the one in the ReadMe of https://github.com/DominicTobias/react-image-crop\r\n * @param {string} imageUrl - Image File url\r\n * @param {Object} pixelCrop - pixelCrop Object provided by react-easy-crop\r\n * @param {number} maxWidth\r\n * @param {number} maxHeight\r\n * @param {string} mimeType\r\n * @param {number} quality\r\n */\n\n\nfunction _limitImageSize() {\n  _limitImageSize = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee2(_ref) {\n    var imageUrl, maxWidth, maxHeight, mimeType, quality, image, _limitSize, width, height, canvas, ctx;\n\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            imageUrl = _ref.imageUrl, maxWidth = _ref.maxWidth, maxHeight = _ref.maxHeight, mimeType = _ref.mimeType, quality = _ref.quality;\n            _context2.next = 3;\n            return createImageDomFromUrl(imageUrl);\n\n          case 3:\n            image = _context2.sent;\n\n            if (!(image.width <= maxWidth && image.height <= maxHeight)) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", imageUrl);\n\n          case 6:\n            _limitSize = limitSize(image.width, image.height, maxWidth, maxHeight), width = _limitSize.width, height = _limitSize.height;\n            canvas = document.createElement(\"canvas\");\n            canvas.width = width;\n            canvas.height = height;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(image, 0, 0, width, height);\n            return _context2.abrupt(\"return\", canvas.toDataURL(mimeType, quality));\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _limitImageSize.apply(this, arguments);\n}\n\nfunction getCroppedFile(_x3, _x4, _x5, _x6, _x7, _x8) {\n  return _getCroppedFile.apply(this, arguments);\n}\n\nfunction _getCroppedFile() {\n  _getCroppedFile = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee3(imageUrl, pixelCrop, maxWidth, maxHeight, mimeType, quality) {\n    var _limitSize2, width, height, image, canvas, ctx;\n\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _limitSize2 = limitSize(pixelCrop.width, pixelCrop.height, maxWidth, maxHeight), width = _limitSize2.width, height = _limitSize2.height;\n            _context3.next = 3;\n            return createImageDomFromUrl(imageUrl);\n\n          case 3:\n            image = _context3.sent;\n            canvas = document.createElement(\"canvas\");\n            canvas.width = width;\n            canvas.height = height;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(image, pixelCrop.x, pixelCrop.y, pixelCrop.width, pixelCrop.height, 0, 0, width, height);\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              canvas.toBlob(resolve, mimeType, quality);\n            }));\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getCroppedFile.apply(this, arguments);\n}\n\nfunction limitSize(width, height, maxWidth, maxHeight) {\n  var widthRatio = width / maxWidth;\n  var heightRation = height / maxHeight;\n  var maxRation = Math.max(widthRatio, heightRation);\n\n  if (maxRation > 1) {\n    return {\n      width: width / maxRation,\n      height: height / maxRation\n    };\n  } else {\n    return {\n      width: width,\n      height: height\n    };\n  }\n}"]},"metadata":{},"sourceType":"script"}